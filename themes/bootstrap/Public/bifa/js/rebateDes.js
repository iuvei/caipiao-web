$(function() {
    /*返点说明接口*/
    var nav = $('#rebateNav a'),
            leftModes=$('#rebateTitle'),
            rebateTable=$('#rebateTable'),
            rebateTableCon=$('#rebateTableCon'),
            rebateContent=$('.rebateContent'),
            leftBtn=$('.rebateTableCon em'),
            rightBtn=$('.rebateTableCon i'),
            TypeStorage={},// 缓存数据
            PointData=[],//自身还点缓存
            setObj={Max:7.5,Min:0},
            ajaxData={Action:"RebateDes"};
    var TestData=$('<div id="testShow" class="testShow" style="display:none">温馨提示：时时彩是基数2元一注的奖金模式，要换算成赔率，只需奖金除以2即可。</div>');
    rebateContent.before(TestData);
    /**
     * [getType 获取当前彩种名称]
     * @return {[type]} [description]
     */
    function getType(){
        var isType=location.hash.split('#')[1]||'K3';
        return isType;
    };
    var SSCData={"SSC":[{"Mode":"大小单双-二星","Odd":[1,4]},{"Mode":"大小单双-三星","Odd":[1,8]},{"Mode":"一星-复式","Odd":[1,10]},{"Mode":"二星-直选复式","Odd":[1,100]},{"Mode":"二星-直选单式","Odd":[1,100]},{"Mode":"二星-直选和值","Odd":[1,100]},{"Mode":"二星-跨度","Odd":[1,100]},{"Mode":"二星-组选复式","Odd":[2,100]},{"Mode":"二星-组选单式","Odd":[2,100]},{"Mode":"二星-组选和值","Odd":[2,100]},{"Mode":"二星-组选包胆","Odd":[2,100]},{"Mode":"三星-复式","Odd":[1,1000]},{"Mode":"三星-单式","Odd":[1,1000]},{"Mode":"三星-直选和值","Odd":[1,1000]},{"Mode":"三星-跨度","Odd":[1,1000]},{"Mode":"三星-组选和值","Odd":[6,1000]},{"Mode":"三星-组三","Odd":[3,1000]},{"Mode":"三星-组六","Odd":[6,1000]},{"Mode":"三星-混合组选","Odd":[6,1000]},{"Mode":"三星-组选包胆","Odd":[6,1000]},{"Mode":"三星-组三单式","Odd":[3,1000]},{"Mode":"三星-组六单式","Odd":[6,1000]},{"Mode":"三星-一码不定位","Odd":[271,1000]},{"Mode":"三星-二码不定位","Odd":[54,1000]},{"Mode":"四星-复式","Odd":[1,10000]},{"Mode":"四星-单式","Odd":[1,10000]},{"Mode":"四星-组选24","Odd":[24,10000]},{"Mode":"四星-组选12","Odd":[12,10000]},{"Mode":"四星-组选6","Odd":[6,10000]},{"Mode":"四星-组选4","Odd":[4,10000]},{"Mode":"四星-一码不定位","Odd":[3439,10000]},{"Mode":"四星-二码不定位","Odd":[974,10000]},{"Mode":"五星-复式","Odd":[1,100000]},{"Mode":"五星-单式","Odd":[1,100000]},{"Mode":"五星-组选120","Odd":[120,100000]},{"Mode":"五星-组选60","Odd":[60,100000]},{"Mode":"五星-组选30","Odd":[30,100000]},{"Mode":"五星-组选20","Odd":[20,100000]},{"Mode":"五星-组选10","Odd":[10,100000]},{"Mode":"五星-组选5","Odd":[5,100000]},{"Mode":"五星-一码不定位","Odd":[40951,100000]},{"Mode":"五星-二码不定位","Odd":[14670,100000]},{"Mode":"五星-三码不定位","Odd":[4350,100000]},{"Mode":"五星-一帆风顺","Odd":[40951,100000]},{"Mode":"五星-好事成双","Odd":[8146,100000]},{"Mode":"五星-三星报喜","Odd":[856,100000]},{"Mode":"五星-四季发财","Odd":[46,100000]}]};
    var ObjArr={
        "K3":{"Rebate":[7.5,0.0],"List":[{"Mode":"\u548c\u503c\u5927/\u5c0f/\u5355/\u53cc","Odd":["1.95","1.948","1.946","1.944","1.942","1.94","1.938","1.936","1.934","1.932","1.93","1.928","1.926","1.924","1.922","1.92","1.918","1.916","1.914","1.912","1.91","1.908","1.906","1.904","1.902","1.90","1.898","1.896","1.894","1.892","1.89","1.888","1.886","1.884","1.882","1.88","1.878","1.876","1.874","1.872","1.87","1.868","1.866","1.864","1.862","1.86","1.858","1.856","1.854","1.852","1.85","1.848","1.846","1.844","1.842","1.84","1.838","1.836","1.834","1.832","1.83","1.828","1.826","1.824","1.822","1.82","1.818","1.816","1.814","1.812","1.81","1.808","1.806","1.804","1.802","1.80"]},{"Mode":"\u548c\u503c3/18","Odd":["189.00","188.78","188.56","188.35","188.13","187.92","187.70","187.48","187.27","187.05","186.84","186.62","186.40","186.19","185.97","185.76","185.54","185.32","185.11","184.89","184.68","184.46","184.24","184.03","183.81","183.60","183.38","183.16","182.95","182.73","182.52","182.30","182.08","181.87","181.65","181.44","181.22","181.00","180.79","180.57","180.36","180.14","179.92","179.71","179.49","179.28","179.06","178.84","178.63","178.41","178.20","177.98","177.76","177.55","177.33","177.12","176.90","176.68","176.47","176.25","176.04","175.82","175.60","175.39","175.17","174.96","174.74","174.52","174.31","174.09","173.88","173.66","173.44","173.23","173.01","172.80"]},{"Mode":"\u548c\u503c4/17","Odd":["63.00","62.92","62.85","62.78","62.71","62.64","62.56","62.49","62.42","62.35","62.28","62.20","62.13","62.06","61.99","61.92","61.84","61.77","61.70","61.63","61.56","61.48","61.41","61.34","61.27","61.20","61.12","61.05","60.98","60.91","60.84","60.76","60.69","60.62","60.55","60.48","60.40","60.33","60.26","60.19","60.12","60.04","59.97","59.90","59.83","59.76","59.68","59.61","59.54","59.47","59.40","59.32","59.25","59.18","59.11","59.04","58.96","58.89","58.82","58.75","58.68","58.60","58.53","58.46","58.39","58.32","58.24","58.17","58.10","58.03","57.96","57.88","57.81","57.74","57.67","57.60"]},{"Mode":"\u548c\u503c5/16","Odd":["31.50","31.46","31.42","31.39","31.35","31.32","31.28","31.24","31.21","31.17","31.14","31.10","31.06","31.03","30.99","30.96","30.92","30.88","30.85","30.81","30.78","30.74","30.70","30.67","30.63","30.60","30.56","30.52","30.49","30.45","30.42","30.38","30.34","30.31","30.27","30.24","30.20","30.16","30.13","30.09","30.06","30.02","29.98","29.95","29.91","29.88","29.84","29.80","29.77","29.73","29.70","29.66","29.62","29.59","29.55","29.52","29.48","29.44","29.41","29.37","29.34","29.30","29.26","29.23","29.19","29.16","29.12","29.08","29.05","29.01","28.98","28.94","28.90","28.87","28.83","28.80"]},{"Mode":"\u548c\u503c6/15","Odd":["18.90","18.87","18.85","18.83","18.81","18.79","18.77","18.74","18.72","18.70","18.68","18.66","18.64","18.61","18.59","18.57","18.55","18.53","18.51","18.48","18.46","18.44","18.42","18.40","18.38","18.36","18.33","18.31","18.29","18.27","18.25","18.23","18.20","18.18","18.16","18.14","18.12","18.10","18.07","18.05","18.03","18.01","17.99","17.97","17.94","17.92","17.90","17.88","17.86","17.84","17.82","17.79","17.77","17.75","17.73","17.71","17.69","17.66","17.64","17.62","17.60","17.58","17.56","17.53","17.51","17.49","17.47","17.45","17.43","17.40","17.38","17.36","17.34","17.32","17.30","17.28"]},{"Mode":"\u548c\u503c7/14","Odd":["12.60","12.58","12.57","12.55","12.54","12.52","12.51","12.49","12.48","12.47","12.45","12.44","12.42","12.41","12.39","12.38","12.36","12.35","12.34","12.32","12.31","12.29","12.28","12.26","12.25","12.24","12.22","12.21","12.19","12.18","12.16","12.15","12.13","12.12","12.11","12.09","12.08","12.06","12.05","12.03","12.02","12.00","11.99","11.98","11.96","11.95","11.93","11.92","11.90","11.89","11.88","11.86","11.85","11.83","11.82","11.80","11.79","11.77","11.76","11.75","11.73","11.72","11.70","11.69","11.67","11.66","11.64","11.63","11.62","11.60","11.59","11.57","11.56","11.54","11.53","11.52"]},{"Mode":"\u548c\u503c8/13","Odd":["9.00","8.98","8.97","8.96","8.95","8.94","8.93","8.92","8.91","8.90","8.89","8.88","8.87","8.86","8.85","8.84","8.83","8.82","8.81","8.80","8.79","8.78","8.77","8.76","8.75","8.74","8.73","8.72","8.71","8.70","8.69","8.68","8.67","8.66","8.65","8.64","8.62","8.61","8.60","8.59","8.58","8.57","8.56","8.55","8.54","8.53","8.52","8.51","8.50","8.49","8.48","8.47","8.46","8.45","8.44","8.43","8.42","8.41","8.40","8.39","8.38","8.37","8.36","8.35","8.34","8.33","8.32","8.31","8.30","8.29","8.28","8.26","8.25","8.24","8.23","8.22"]},{"Mode":"\u548c\u503c9/12","Odd":["7.56","7.55","7.54","7.53","7.52","7.51","7.50","7.49","7.49","7.48","7.47","7.46","7.45","7.44","7.43","7.43","7.42","7.41","7.40","7.39","7.38","7.37","7.36","7.36","7.35","7.34","7.33","7.32","7.31","7.30","7.30","7.29","7.28","7.27","7.26","7.25","7.24","7.24","7.23","7.22","7.21","7.20","7.19","7.18","7.17","7.17","7.16","7.15","7.14","7.13","7.12","7.11","7.11","7.10","7.09","7.08","7.07","7.06","7.05","7.05","7.04","7.03","7.02","7.01","7.00","6.99","6.98","6.98","6.97","6.96","6.95","6.94","6.93","6.92","6.92","6.91"]},{"Mode":"\u548c\u503c10/11","Odd":["7.00","6.99","6.98","6.97","6.96","6.96","6.95","6.94","6.93","6.92","6.92","6.91","6.90","6.89","6.88","6.88","6.87","6.86","6.85","6.84","6.84","6.83","6.82","6.81","6.80","6.80","6.79","6.78","6.77","6.76","6.76","6.75","6.74","6.73","6.72","6.72","6.71","6.70","6.69","6.68","6.68","6.67","6.66","6.65","6.64","6.64","6.63","6.62","6.61","6.60","6.60","6.59","6.58","6.57","6.56","6.56","6.55","6.54","6.53","6.52","6.52","6.51","6.50","6.49","6.48","6.48","6.47","6.46","6.45","6.44","6.44","6.43","6.42","6.41","6.40","6.40"]},{"Mode":"\u4e09\u540c\u53f7\u901a\u9009","Odd":["31.50","31.46","31.42","31.39","31.35","31.32","31.28","31.24","31.21","31.17","31.14","31.10","31.06","31.03","30.99","30.96","30.92","30.88","30.85","30.81","30.78","30.74","30.70","30.67","30.63","30.60","30.56","30.52","30.49","30.45","30.42","30.38","30.34","30.31","30.27","30.24","30.20","30.16","30.13","30.09","30.06","30.02","29.98","29.95","29.91","29.88","29.84","29.80","29.77","29.73","29.70","29.66","29.62","29.59","29.55","29.52","29.48","29.44","29.41","29.37","29.34","29.30","29.26","29.23","29.19","29.16","29.12","29.08","29.05","29.01","28.98","28.94","28.90","28.87","28.83","28.80"]},{"Mode":"\u4e09\u540c\u53f7\u5355\u9009","Odd":["189.00","188.78","188.56","188.35","188.13","187.92","187.70","187.48","187.27","187.05","186.84","186.62","186.40","186.19","185.97","185.76","185.54","185.32","185.11","184.89","184.68","184.46","184.24","184.03","183.81","183.60","183.38","183.16","182.95","182.73","182.52","182.30","182.08","181.87","181.65","181.44","181.22","181.00","180.79","180.57","180.36","180.14","179.92","179.71","179.49","179.28","179.06","178.84","178.63","178.41","178.20","177.98","177.76","177.55","177.33","177.12","176.90","176.68","176.47","176.25","176.04","175.82","175.60","175.39","175.17","174.96","174.74","174.52","174.31","174.09","173.88","173.66","173.44","173.23","173.01","172.80"]},{"Mode":"\u4e09\u4e0d\u540c\u53f7","Odd":["31.50","31.46","31.42","31.39","31.35","31.32","31.28","31.24","31.21","31.17","31.14","31.10","31.06","31.03","30.99","30.96","30.92","30.88","30.85","30.81","30.78","30.74","30.70","30.67","30.63","30.60","30.56","30.52","30.49","30.45","30.42","30.38","30.34","30.31","30.27","30.24","30.20","30.16","30.13","30.09","30.06","30.02","29.98","29.95","29.91","29.88","29.84","29.80","29.77","29.73","29.70","29.66","29.62","29.59","29.55","29.52","29.48","29.44","29.41","29.37","29.34","29.30","29.26","29.23","29.19","29.16","29.12","29.08","29.05","29.01","28.98","28.94","28.90","28.87","28.83","28.80"]},{"Mode":"\u4e09\u8fde\u53f7\u901a\u9009","Odd":["7.87","7.86","7.85","7.84","7.83","7.83","7.82","7.81","7.80","7.79","7.78","7.77","7.76","7.75","7.74","7.74","7.73","7.72","7.71","7.70","7.69","7.68","7.67","7.66","7.65","7.65","7.64","7.63","7.62","7.61","7.60","7.59","7.58","7.57","7.56","7.56","7.55","7.54","7.53","7.52","7.51","7.50","7.49","7.48","7.47","7.47","7.46","7.45","7.44","7.43","7.42","7.41","7.40","7.39","7.38","7.38","7.37","7.36","7.35","7.34","7.33","7.32","7.31","7.30","7.29","7.29","7.28","7.27","7.26","7.25","7.24","7.23","7.22","7.21","7.20","7.20"]},{"Mode":"\u4e8c\u540c\u53f7\u590d\u9009","Odd":["12.60","12.58","12.57","12.55","12.54","12.52","12.51","12.49","12.48","12.47","12.45","12.44","12.42","12.41","12.39","12.38","12.36","12.35","12.34","12.32","12.31","12.29","12.28","12.26","12.25","12.24","12.22","12.21","12.19","12.18","12.16","12.15","12.13","12.12","12.11","12.09","12.08","12.06","12.05","12.03","12.02","12.00","11.99","11.98","11.96","11.95","11.93","11.92","11.90","11.89","11.88","11.86","11.85","11.83","11.82","11.80","11.79","11.77","11.76","11.75","11.73","11.72","11.70","11.69","11.67","11.66","11.64","11.63","11.62","11.60","11.59","11.57","11.56","11.54","11.53","11.52"]},{"Mode":"\u4e8c\u540c\u53f7\u5355\u9009","Odd":["63.00","62.92","62.85","62.78","62.71","62.64","62.56","62.49","62.42","62.35","62.28","62.20","62.13","62.06","61.99","61.92","61.84","61.77","61.70","61.63","61.56","61.48","61.41","61.34","61.27","61.20","61.12","61.05","60.98","60.91","60.84","60.76","60.69","60.62","60.55","60.48","60.40","60.33","60.26","60.19","60.12","60.04","59.97","59.90","59.83","59.76","59.68","59.61","59.54","59.47","59.40","59.32","59.25","59.18","59.11","59.04","58.96","58.89","58.82","58.75","58.68","58.60","58.53","58.46","58.39","58.32","58.24","58.17","58.10","58.03","57.96","57.88","57.81","57.74","57.67","57.60"]},{"Mode":"\u4e8c\u4e0d\u540c\u53f7","Odd":["6.30","6.29","6.28","6.27","6.27","6.26","6.25","6.24","6.24","6.23","6.22","6.22","6.21","6.20","6.19","6.19","6.18","6.17","6.17","6.16","6.15","6.14","6.14","6.13","6.12","6.12","6.11","6.10","6.09","6.09","6.08","6.07","6.06","6.06","6.05","6.04","6.04","6.03","6.02","6.01","6.01","6.00","5.99","5.99","5.98","5.97","5.96","5.96","5.95","5.94","5.94","5.93","5.92","5.91","5.91","5.90","5.89","5.88","5.88","5.87","5.86","5.86","5.85","5.84","5.83","5.83","5.82","5.81","5.81","5.80","5.79","5.78","5.78","5.77","5.76","5.76"]}]},
        "SSC":{"Rebate":[8.0,0.00],"List":[]},
        "SYX5":{"Rebate":[8.0,0.00],"List":[]},
        "FC3D":{"Rebate":[8.0,0.00],"List":[]},
        "PL35":{"Rebate":[8.0,0.00],"List":[]},
        "KL8":{"Rebate":[8.0,0.00],"List":[]},
        "PK10":{"Rebate":[8.0,0.00],"List":[]}
    }
    var Type=getType();
    var xdata="";//ObjArr[Type];
    /**
     * [isInteger 是否整数]
     * @param  {[type]}  Num [description]
     * @return {Boolean}     [description]
     */
    function isInteger(Num) {
         return Num%1 === 0
        }

    /**
     * [getDataAjax 获取数据]
     * @param  {[type]} Type [description]
     * @return {[type]}      [description]
     */
    function getDataAjax(Type){
        //TypeStorage[Type]=xdata;//调试数据
        if(Type!='K3'){
            setObj.Max=8.0;
            setObj.Min=0;
        }else{
            setObj.Max=7.5;
            setObj.Min=0;
        }
        var isData=TypeStorage[Type]||0;
        if(isData){
            DomSetData(isData);
        }else{
            getAjax(Type);
        }
    }
    // ajax数据
    function getAjax(Type){
        ajaxData.LotteryType=Type;
        $.ajax({
            load:true,
            data:ajaxData,
            success:function(data){
                var Data=data.BackData;
                if(data.Code===1){
                    TypeStorage[Type]=Data;
                    DomSetData(Data);
                }else{
                    layer.msgWarn(data.StrCode);
                }
            }
        })
    }
    /**
     * [setStyle 设置表格宽度]
     */
    function setStyle(){
        var Num=rebateTable.find('ul.xli').length;
        //rebateTable.find('ul.xli').css('width',840/Num+'px').find('li').css('width','100%');
    }
    function ObjtoData(data){
        this.data=data;
        this.PlayType=getType();
    }
    /**
     * [Rebate 计算默认返点区间]
     * @param {[type]} Max [description]
     * @param {[type]} Min [description]
     */
    ObjtoData.prototype.Rebate=function(Max,Min){
        var isArr=[],
                toli=(Max-Min)*10;
        for(var i=0;i<=toli;i++){
            var theObj=(Max*10-i)/10;
            isArr.push(theObj.toFixed(1));
        }
        return isArr;
    }
    /**
     * [SetOdd 计算赔率区间]
     * @param {[type]} max [description]
     * @param {[type]} min [description]
     */
    ObjtoData.prototype.SetOdd=function(max,min,set){
        var Num=(this.Rebate(setObj.Max,setObj.Min).length)-1;
        var Arr=[];
        var toli=(max-min)/Num;
        for(var i=Num;i>=0;i--){
            var iser=toli*i+min;
            if(set){
                Arr.push(iser.toFixed(3));
            }else{
                Arr.push((Math.round(iser.toFixed(3)*100)/100).toFixed(2));
            }
        }
        return Arr;
    }
    /**
     * [ReMode 获取玩法序列和赔率]
     */
    ObjtoData.prototype.ReMode=function(){
        var isArr=new Object();
            isArr.Mode=[];
            isArr.Data=[];
        var isMode=this.data.List;
        for(var i=0;i<isMode.length;i++){
            isArr.Mode.push(isMode[i].Mode);
            var set=false,
                Mode=isMode[i].Mode,
                iMo=Mode.substr(Mode.length-2);
            if(iMo=='三星'||iMo=='二星'||iMo=='/双'){
                set=true;
            }
            var Num=this.setArrData(isMode[i].Odd,set);//this.SetOdd(isMode[i].Odd[0],isMode[i].Odd[1],set);
            isArr.Data.push(Num);
        }
        return isArr;
    }
    /**
     * [setArrData 针对赔率数组处理]
     * @param {[type]} Arr [description]
     */
    ObjtoData.prototype.setArrData=function(Arr,set){
        var isArr=[];
        for(var i=0,l=Arr.length;i<l;i++){
            if(this.PlayType=="SSC"){
             set?isArr.push(Number(Math.floor(Arr[i]*1000)/1000).toFixed(3)):isArr.push((Math.floor(Arr[i]*100)/100).toFixed(2));
            }else{
             set?isArr.push(Number(Arr[i]).toFixed(3)):isArr.push(Number(Arr[i]).toFixed(2));
            }
        }
        return isArr;
    }
    /**
     * [setPlayArr 可能性注数求赔率算法]
     * @param {[type]} Type [description]
     * @param {[type]} Obj  [description]
     */
    ObjtoData.prototype.setPlayArr=function(ObjArr){
        var Arr=[],i=0,ObjAll=ObjArr,Num=this.Rebate(setObj.Max,setObj.Min);
        for(l=ObjAll.length;i<l;i++){
            var Obj=new Object(),j=0;
                Obj.Mode=ObjAll[i].Mode;
                Obj.Odd=[];
                for(x=Num.length;j<x;j++){
                    Obj.Odd.push(ObjAll[i].Odd[1]/ObjAll[i].Odd[0]*(0.9+Num[j]/100)*2);
                }
                Arr.push(Obj);
        }
        this.data.List=Arr;
    }
    /**
     * [leftMode 获取玩法列表]
     * @return {[type]} [description]
     */
    ObjtoData.prototype.leftMode=function(){
        var isArr=[];
        var Objlist=this.ReMode().Mode;
        isArr.push('<li><i>玩法</i><span></span><em>返点</em></li>');
        for(var i=0;i<Objlist.length;i++){
            isArr.push('<li>'+Objlist[i]+'</li>');
        }
        var list=isArr.join('');
        leftModes.html(list);
    }
    /**
     * [rightData 获取赔率列表]
     * @return {[type]} [description]
     */
    ObjtoData.prototype.rightData=function(){
        var isArr=[],
                reArr=this.Rebate(setObj.Max,setObj.Min),
                ModeArr=this.ReMode().Data,
                i=0;
        for(;i<reArr.length;i++){
            var nArr=[],
                    Onum=reArr[i],
                    isNum=isInteger(Onum),
                    j=0;
            nArr.push('<li>'+reArr[i]+'</li>');
            var ptxt="赔率";
            if(this.PlayType=="SSC"){
                ptxt="奖金"
            }
            for(;j<ModeArr.length;j++){
                nArr.push('<li>'+ptxt+ModeArr[j][i]+'</li>');
            }
            if(Onum<=this.data.Rebate[0]&&Onum>=this.data.Rebate[1]){
                if(isNum||Onum==this.data.Rebate[0]){
                    isArr.push('<ul class="isClass xli" data-id="'+Onum+'">'+nArr.join('')+'</ul>');
                }else{
                    isArr.push('<ul class="noClass" style="display:none">'+nArr.join('')+'</ul>');
                }
            }
        }
        rebateTable.html(isArr.join(''));
    };

    /**
     * [DomSetData 数据渲染]
     * @param {[type]} data [对缓存或请求数据渲染]
     */
    function DomSetData(data){
        var xType=getType();
        var iiobj=new ObjtoData(data);
        if(xType=="SSC"){
            iiobj.setPlayArr(SSCData[xType]);
        }
            iiobj.leftMode();
            iiobj.rightData();
            setStyle();
    };

    /**
     * [if 临时获取自身返点方法]
     * @param  {[type]} PointData [description]
     * @return {[type]}           [description]
     */
    var noData='<div class="notContent" style="padding:100px 0;margin-left:100px">功能完善中，将于近期添加完成！</div>';
    var $div=$('<div id="noData"></div>').append(noData);
    function doDataArr(){
        var xType=getType(),
            isNO=$('#noData').length;
            xdata=ObjArr[xType];
            nav.each(function(i,n){
                var xurl=n,self=$(this),key=String(xurl).split('#')[1];
                if(key==xType){
                    self.addClass('curr').siblings('a').removeClass('curr');
                }
            });
        if(xType=='K3'||xType=='SSC'){
            rebateContent.show();
            if(isNO){
                $('#noData').remove();
            }
            // if(PointData.length){
            //     getDataAjax(xType);
            // }else{
            var AgentRebate=JSON.parse(localStorage.getItem("AgentRebate"));
            var i=0;
                for(;i<AgentRebate.length;i++){
                    var iCode=AgentRebate[i].LotteryType;
                    if(iCode==xType){
                        var Max=AgentRebate[i].Point;
                            Min=AgentRebate[i].MinPoint;
                        PointData[0]=Number(Max);
                        PointData[1]=Number(Min);
                        xdata.Rebate[0]=PointData[0];
                        xdata.Rebate[1]=PointData[1];
                        TypeStorage[xType]=xdata;
                        getDataAjax(xType);
                    }

                }
            // }
        }else{
            if(!isNO){
                rebateContent.hide().after($div);
            }
        }
        var testShow=$("#testShow");
        xType=='SSC'?testShow.show():testShow.hide();
    };doDataArr();
    /**
     * 栏目切换
     */
    nav.click(function() {
        var that = $(this),
            isSul = that.hasClass('curr'),
            Type=that.attr('href').substr(1);
        if (!isSul) {
            that.addClass('curr').siblings('a').removeClass('curr');
            setTimeout(doDataArr,1);
            //doDataArr();
            //getDataAjax(Type);
            }
    });
    //getDataAjax(getType());
    rebateTable.on('click','.isClass li',function(){
        var self=$(this).closest('ul'),isshow=self.hasClass('show'),isbig=rebateTable.find('ul').length-1,index=$(this).index();
        if(index!==0)return false;
        if(self.index()==isbig)return false;
        if(isshow){
            self.removeClass('show').nextUntil('.isClass').hide().removeClass('xli');
            self.siblings('.isClass').show().addClass('xli');
        }else{
            self.addClass('show').nextUntil('.isClass').show().removeClass('xli').addClass('xli');
            self.siblings('.isClass').hide().removeClass('xli');
        }
        setStyle();
    })
});